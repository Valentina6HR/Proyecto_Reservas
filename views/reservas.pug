extends layout/index

block contenido
    .max-w-4xl.mx-auto.mt-8.mb-16
        //- Encabezado
        .text-center.mb-12(data-aos="fade-down")
            h1(class="text-4xl.md_text-5xl.font-semibold.text-purple-600.mb-4")(style="font-family: 'Playfair Display', serif;") 
                | Reservar Mesa
            p.text-gray-600.text-lg.font-light Completa el formulario y reserva tu espacio

        //- Contenedor principal del formulario
        .bg-white.rounded-3xl.shadow-2xl.p-8.md_p-12.border-4.border-purple-200(data-aos="fade-up")
            
            //- Mostrar errores si existen
            if errores
                .mb-8
                    each error in errores
                        .bg-red-50.border-l-4.border-red-400.text-red-700.p-4.rounded-lg.mb-3.shadow-sm
                            p.text-sm.font-medium= error.msg

            //- Formulario de reserva
            form(method="POST" action="/reservas" class="space-y-6")
                input(type="hidden" name="_csrf" value=csrfToken)
                input(type="hidden" name="dispositivo" value="desktop")

                //- Grid de campos
                .grid.grid-cols-1.md_grid-cols-2.gap-6

                    //- Nombre
                    .relative
                        label.block.text-sm.font-medium.text-purple-700.mb-2(for="nombre") 
                            | Nombre Completo
                        input#nombre.w-full.px-4.py-3.border-2.border-purple-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent")(
                            type="text" 
                            name="nombre" 
                            placeholder="Tu nombre"
                            value=datosFormulario ? datosFormulario.nombre : (usuario ? usuario.nombre : '')
                            required
                        )

                    //- Email
                    .relative
                        label.block.text-sm.font-medium.text-purple-700.mb-2(for="email") 
                            | Correo Electrónico
                        input#email.w-full.px-4.py-3.border-2.border-purple-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent")(
                            type="email" 
                            name="email" 
                            placeholder="tu@email.com"
                            value=datosFormulario ? datosFormulario.email : (usuario ? usuario.email : '')
                            required
                        )

                    //- Teléfono
                    .relative
                        label.block.text-sm.font-medium.text-purple-700.mb-2(for="telefono") 
                            | Teléfono
                        input#telefono.w-full.px-4.py-3.border-2.border-purple-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent")(
                            type="tel" 
                            name="telefono" 
                            placeholder="1234567890"
                            value=datosFormulario ? datosFormulario.telefono : (usuario ? usuario.telefono : '')
                            required
                        )

                    //- Número de personas
                    .relative
                        label.block.text-sm.font-medium.text-purple-700.mb-2(for="numero_personas") 
                            | Número de Personas
                        select#numero_personas.w-full.px-4.py-3.border-2.border-purple-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent")(
                            name="numero_personas"
                            required
                        )
                            option(value="" disabled selected) Selecciona
                            option(value="1") 1 persona
                            option(value="2") 2 personas
                            option(value="3") 3 personas
                            option(value="4") 4 personas
                            option(value="5") 5 personas
                            option(value="6") 6 personas
                            option(value="7") 7 personas
                            option(value="8") 8 personas
                            option(value="9") 9 personas
                            option(value="10") 10 personas
                            option(value="11") 11 personas
                            option(value="12") 12 personas
                            option(value="13") 13 personas
                            option(value="14") 14 personas
                            option(value="15") 15 personas
                            option(value="16") 16 personas
                            option(value="17") 17 personas
                            option(value="18") 18 personas
                            option(value="19") 19 personas
                            option(value="20") 20 personas

                    //- Fecha
                    .relative
                        label.block.text-sm.font-medium.text-purple-700.mb-2(for="fecha_reserva") 
                            | Fecha
                        input#fecha_reserva.w-full.px-4.py-3.border-2.border-pink-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent")(
                            type="date" 
                            name="fecha_reserva" 
                            required
                        )

                    //- Hora
                    .relative
                        label.block.text-sm.font-medium.text-purple-700.mb-2(for="hora_inicio") 
                            | Hora
                        input#hora_inicio.w-full.px-4.py-3.border-2.border-pink-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent")(
                            type="time" 
                            name="hora_inicio" 
                            required
                        )

                //- Zona preferida
                .relative
                    label.block.text-sm.font-medium.text-purple-700.mb-3 
                        | Zona Preferida
                    .grid.grid-cols-2.md_grid-cols-4.gap-4
                        each zona in ['interior', 'terraza', 'barra', 'privado']
                            label.relative.cursor-pointer
                                input.peer.sr-only(type="radio" name="zona" value=zona required)
                                .bg-purple-50.border-2.border-purple-200.rounded-xl.p-4.text-center.transition-all.duration-300(class="peer-checked:bg-gradient-to-br peer-checked:from-purple-500 peer-checked:to-pink-500 peer-checked:text-white peer-checked:border-purple-600 peer-checked:shadow-lg hover:shadow-md hover:scale-105")
                                    p.font-medium.capitalize= zona

                //- Observaciones
                .relative
                    label.block.text-sm.font-medium.text-purple-700.mb-2(for="observaciones") 
                        | Observaciones (Opcional)
                    textarea#observaciones.w-full.px-4.py-3.border-2.border-purple-200.rounded-xl(class="focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent")(
                        name="observaciones" 
                        rows="3"
                        placeholder="Alguna petición especial..."
                    )

                //- Botón de submit
                button(class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-4 rounded-xl transition-all duration-300 transform text-lg hover:shadow-2xl hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-300")(
                    type="submit"
                ) 
                    | Confirmar Reserva 

    //- Script para configurar fecha mínima
    script.
        document.addEventListener('DOMContentLoaded', function() {
            const fechaInput = document.getElementById('fecha_reserva');
            if (fechaInput) {
                const hoy = new Date();
                const fechaMinima = hoy.toISOString().split('T')[0];
                fechaInput.setAttribute('min', fechaMinima);
            }
        });
