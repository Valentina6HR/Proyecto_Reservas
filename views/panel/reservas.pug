extends ../layout/admin

block contenido
    .mb-8
        h1(class="text-4xl.font-semibold.text-purple-600.mb-2")(style="font-family: 'Playfair Display', serif;") 
            | Gestión de Reservas
        p.text-gray-600.font-light Administra todas las reservas del sistema

    //- Tabla de reservas
    .bg-white.rounded-2xl.shadow-lg.p-6.border-2.border-purple-100
        if Reservas && Reservas.length > 0
            .overflow-x-auto
                table.w-full
                    thead.bg-gradient-to-r.from-purple-100.to-pink-100
                        tr
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 ID
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 Cliente
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 Fecha
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 Hora
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 Personas
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 Estado
                            th.px-4.py-3.text-left.text-sm.font-semibold.text-purple-700 Acciones
                    tbody
                        each Reserva in Reservas
                            tr(class="border-b border-purple-100 transition-colors hover:bg-purple-50").transition-colors
                                td.px-4.py-3.text-sm= Reserva.id_reserva
                                td.px-4.py-3.text-sm= Reserva.nombre_cliente
                                td.px-4.py-3.text-sm= new Date(Reserva.fecha_reserva).toLocaleDateString('es-ES')
                                td.px-4.py-3.text-sm= Reserva.hora_inicio
                                td.px-4.py-3.text-sm= Reserva.numero_personas
                                td.px-4.py-3
                                    - var estadoClases = { 'pendiente': 'bg-yellow-100 text-yellow-700', 'confirmada': 'bg-green-100 text-green-700', 'cancelada': 'bg-red-100 text-red-700' }
                                    span(class=`px-2 py-1 rounded-full text-xs font-medium ${estadoClases[Reserva.estado]}`)= Reserva.estado
                                td.px-4.py-3
                                    form.inline(method="POST" action=`/gestion/reservas/${Reserva.id_reserva}/estado`)
                                        input(type="hidden" name="_csrf" value=csrfToken)
                                        select.text-xs.px-2.py-1.rounded.border.border-purple-300(name="estado" onchange="this.form.submit()")
                                            option(value="pendiente" selected=Reserva.estado==='pendiente') Pendiente
                                            option(value="confirmada" selected=Reserva.estado==='confirmada') Confirmada
                                            option(value="completada" selected=Reserva.estado==='completada') Completada
                                            option(value="cancelada" selected=Reserva.estado==='cancelada') Cancelada
                                    
                                    //- Botón Reprogramar
                                    a(href=`/gestion/reservas/${Reserva.id_reserva}/reprogramar` class="ml-2 bg-blue-100 text-blue-600 px-3 py-1 rounded hover:bg-blue-200 transition-colors text-xs font-medium") 
                                        | Reagendar
        else
            p.text-gray-500.text-center.py-12 No hay reservas registradas
